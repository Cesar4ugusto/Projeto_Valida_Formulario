<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Validação de Formulário</title>
</head>
<body>

    <form method="POST" novalidate onsubmit="return validate()">
        <h4>Validação de Formulário</h4>
        <input type="text" onclick="return notErrorForm(this.id)" name="cpfCnpj" id="cpfCnpj" placeholder="CPF/CNPJ">
        <input type="text" onclick="return notErrorForm(this.id)" name="email" id="email" placeholder="EMAIL">
        <input type="text" onclick="return notErrorForm(this.id)" name="telefone" id="telefone" placeholder="TELEFONE">
        <input type="submit" name="enviar" value="Enviar">
    </form>
    
    <script>

        function validateCpfCnpj(values) {

            values = values.replace(/\./g, '');
            values = values.replace('-', '');
            values = values.replace('/', '');

            if (values.length == 11) {
                var cpf = values;
                
                var v1 = 0;
                var v2 = 0;
                var aux = false;
                
                for (var i = 1; cpf.length > i; i++) {
                    if (cpf[i - 1] != cpf[i]) {
                        aux = true;   
                    }
                } 

                if (aux == false) {
                    return false; 
                }

                for (var i = 0, p = 10; (cpf.length - 2) > i; i++, p--) {
                    v1 += cpf[i] * p; 
                } 
                
                v1 = ((v1 * 10) % 11);
                
                if (v1 == 10) {
                    v1 = 0; 
                }

                if (v1 != cpf[9]) {
                    return false; 
                }

                for (var i = 0, p = 11; (cpf.length - 1) > i; i++, p--) {
                    v2 += cpf[i] * p; 
                } 
                
                v2 = ((v2 * 10) % 11);
                
                if (v2 == 10) {
                    v2 = 0; 
                }

                if (v2 != cpf[10]) {
                    return false; 
                } else {   
                    return true; 
                }

            } else if (values.length == 14) {
                var cnpj = values;
                
                var v1 = 0;
                var v2 = 0;
                var aux = false;
                
                for (var i = 1; cnpj.length > i; i++) { 
                    if (cnpj[i - 1] != cnpj[i]) {  
                        aux = true;   
                    } 
                } 
                
                if (aux == false) {
                    return false; 
                }
                
                for (var i = 0, p1 = 5, p2 = 13; (cnpj.length - 2) > i; i++, p1--, p2--) {
                    if (p1 >= 2) {  
                        v1 += cnpj[i] * p1;  
                    } else {  
                        v1 += cnpj[i] * p2;  
                    } 
                } 
                
                v1 = (v1 % 11);
                
                if (v1 < 2) { 
                    v1 = 0; 
                } else { 
                    v1 = (11 - v1); 
                } 
                
                if (v1 != cnpj[12]) {
                    return false; 
                } 
                
                for (var i = 0, p1 = 6, p2 = 14; (cnpj.length - 1) > i; i++, p1--, p2--) { 
                    if (p1 >= 2) {  
                        v2 += cnpj[i] * p1;  
                    } else {   
                        v2 += cnpj[i] * p2; 
                    } 
                }
                
                v2 = (v2 % 11); 
                
                if (v2 < 2) {  
                    v2 = 0;
                } else { 
                    v2 = (11 - v2); 
                } 
                
                if (v2 != cnpj[13]) {
                    return false; 
                } else {  
                    return true; 
                }
            } else {
                return false;
            }

        }

        function validateEmail(values) {

            usuario = values.substring(0, values.indexOf("@"));
            dominio = values.substring(values.indexOf("@") + 1, values.length);

            if ((usuario.search("@") == -1) &&
                (dominio.search("@") == -1) &&
                (usuario.search(" ") == -1) &&
                (dominio.search(" ") == -1) &&
                (dominio.search(".") != -1) &&
                (dominio.indexOf(".") >= 1)&&
                (dominio.lastIndexOf(".") < dominio.length - 1)) {
                    return true;
            } else {
                return false;
            }

        }

        function validateTelefone(values) {

            values = values.replace(/\./g, '');
            values = values.replace('-', '');
            values = values.replace('(', ''); 
            values = values.replace(')', '');
            values = values.replace(/\s+/g, '')

            if (values.length == 10 || values.length == 11) {
                return true;
            } else {
                return false;                
            }

        }

        function errorForm(values, message) {

            if (values == 'cpfCnpj' && message == undefined) {
                alert('Campo CPF/CNPJ incorreto!');
                document.getElementById(values).style.borderColor = "red";
            } else if (values == 'cpfCnpj' && message != undefined) {
                alert('Campo CPF/CNPJ '+ message +'!');
                document.getElementById(values).style.borderColor = "red";
            } else if (values != 'cpfCnpj' && message == undefined) {
                alert('Campo '+ values.toUpperCase() +' incorreto!');cpfCnpj
                document.getElementById(values).style.borderColor = "red";
            } else {
                alert('Campo '+ values.toUpperCase() +' '+ message +'!');
                document.getElementById(values).style.borderColor = "red";
            }

        }

        function notErrorForm(id) {

            document.getElementById(id).style.borderColor = "#5454544d";

        }
        
        function validate() {

            if (document.querySelector('#cpfCnpj').value == '') {
                errorForm('cpfCnpj', 'vazio');
                return false;                
            }

            if (document.querySelector('#email').value == '') {
                errorForm('email', 'vazio');
                return false;                   
            }

            if (document.querySelector('#telefone').value == '') {
                errorForm('telefone', 'vazio');
                return false;                   
            }

            var cpfCnpj = document.getElementById('cpfCnpj').values;
            var email = document.getElementById('email').values;
            var telefone = document.getElementById('telefone').values;

            if (!validateCpfCnpj(cpfCnpj)) {
                errorForm('cpfCnpj')
                return false;
            } else if (!validateEmail(email)) {
                errorForm('email')
                return false;
            } else if (!validateTelefone(telefone)) {
                errorForm('telefone')
                return false;
            } else {
                return true;
            }

        }

        if ((document.getElementById('cpfCnpj').values == '') &&
            (email = document.getElementById('email').values =='') &&
            (telefone = document.getElementById('telefone').values == '')) {
                bt.disabled
            }

    </script>
</body>
</html>